"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createDeepCompareEffect = void 0;
var _react = require("react");
var _isEqual = _interopRequireDefault(require("lodash/isEqual"));
var depsEqual = function depsEqual() {
  var aDeps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  var bDeps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
  return (0, _isEqual["default"])(aDeps, bDeps);
};
var createDeepCompareEffect = function createDeepCompareEffect(hook) {
  return function (effect, deps) {
    var ref = (0, _react.useRef)();
    var signalRef = (0, _react.useRef)(0);
    if (deps === undefined || !depsEqual(deps, ref.current)) {
      ref.current = deps;
      signalRef.current += 1;
    }
    hook(effect, [signalRef.current]);
  };
};
exports.createDeepCompareEffect = createDeepCompareEffect;