{"ast":null,"code":"var _jsxFileName = \"/Users/a366/pizza/src/pages/Home.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport qs from \"qs\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { setCategoryId, setCurrentPage } from \"../redux/slices/filterSlice\";\nimport Categories from \"../componets/Categories\";\nimport Sort from \"../componets/Sort\";\nimport PizzaBlock from \"../componets/PizzaBlock/PizzaBlock\";\nimport Skeleton from \"../componets/PizzaBlock/Skeleton\";\nimport Pagination from \"../componets/Pagination\";\nimport { AppContext } from \"../App\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Home = () => {\n  _s();\n  const dispatch = useDispatch();\n  const {\n    categoryId,\n    sort,\n    currentPage\n  } = useSelector(state => state.filterSlice);\n  const sortType = sort.sortProperty;\n  const {\n    searchValue\n  } = React.useContext(AppContext);\n  const [items, setItems] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  // const [currentPage, setCurrentPage] = useState(1);\n\n  const onChangeCategory = id => {\n    dispatch(setCategoryId(id));\n  };\n  const onChangePage = number => {\n    dispatch(setCurrentPage(number));\n  };\n  useEffect(() => {\n    setIsLoading(true);\n    const sortBy = sort.sortProperty.replace(\"-\", \"\");\n    const order = sort.sortProperty.includes(\"-\") ? \"asc\" : \"desc\";\n    const category = categoryId > 0 ? `category=${categoryId}` : \"\";\n    const search = searchValue ? `&search=${searchValue}` : \"\";\n    axios.get(`https://63f9be5e473885d837d21495.mockapi.io/items?page=${currentPage}&limit=4&${category}&sortBy=${sortBy}&oreder=${order}&${search}`).then(res => {\n      setItems(res.data);\n      setIsLoading(false);\n    });\n    window.scrollTo(0, 0);\n  }, [categoryId, sortType, searchValue, currentPage]);\n  React.useEffect(() => {\n    const queryString = qs.stringify({\n      sortProperty: sortProperty,\n      categoryId,\n      currentPage\n    });\n  }, [categoryId, sortType, currentPage]);\n  const pizzas = items.map(obj => /*#__PURE__*/_jsxDEV(PizzaBlock, {\n    title: obj.title,\n    price: obj.price,\n    imageUrl: obj.imageUrl,\n    sizes: obj.sizes,\n    types: obj.types\n  }, obj.id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this));\n  const skeletons = [...new Array(6)].map((_, index) => /*#__PURE__*/_jsxDEV(Skeleton, {}, index, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content__top\",\n      children: [/*#__PURE__*/_jsxDEV(Categories, {\n        value: categoryId,\n        onClickCategory: onChangeCategory\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Sort, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"content__title\",\n      children: \"\\u0412\\u0441\\u0435 \\u043F\\u0438\\u0446\\u0446\\u044B\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content__items\",\n      children: isLoading ? skeletons : pizzas\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n      currentPage: currentPage,\n      onChangePage: onChangePage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n};\n_s(Home, \"1PneM2DVNi6vK6/Z8bHbOCv5dts=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = Home;\nexport default Home;\n\n// window.scrollTo(0, 0); при переходе на старницу, страница отоброжается на вверху\n\n// const [categoryId, setCategoryId] = useState(0);\n//   const [sortType, setSortType] = useState({\n//     name: \"популярности\",\n//     sort: \"rating\",\n//   }); вынесли useState из Категорий и Сорта\n\n// fetch(\n//   `https://63f9be5e473885d837d21495.mockapi.io/items?page=${currentPage}&limit=4&${category}&sortBy=${sortBy}&oreder=${order}${search}`\n// )\n//   .then((res) => res.json())\n//   .then((arr) => {\n//     setItems(arr);\n//     setIsLoading(false);\n//   });\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","useEffect","axios","qs","useSelector","useDispatch","setCategoryId","setCurrentPage","Categories","Sort","PizzaBlock","Skeleton","Pagination","AppContext","jsxDEV","_jsxDEV","Home","_s","dispatch","categoryId","sort","currentPage","state","filterSlice","sortType","sortProperty","searchValue","useContext","items","setItems","isLoading","setIsLoading","onChangeCategory","id","onChangePage","number","sortBy","replace","order","includes","category","search","get","then","res","data","window","scrollTo","queryString","stringify","pizzas","map","obj","title","price","imageUrl","sizes","types","fileName","_jsxFileName","lineNumber","columnNumber","skeletons","Array","_","index","className","children","value","onClickCategory","_c","$RefreshReg$"],"sources":["/Users/a366/pizza/src/pages/Home.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport qs from \"qs\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport { setCategoryId, setCurrentPage } from \"../redux/slices/filterSlice\";\nimport Categories from \"../componets/Categories\";\nimport Sort from \"../componets/Sort\";\nimport PizzaBlock from \"../componets/PizzaBlock/PizzaBlock\";\nimport Skeleton from \"../componets/PizzaBlock/Skeleton\";\nimport Pagination from \"../componets/Pagination\";\nimport { AppContext } from \"../App\";\n\nconst Home = () => {\n  const dispatch = useDispatch();\n  const { categoryId, sort, currentPage } = useSelector(\n    (state) => state.filterSlice\n  );\n  const sortType = sort.sortProperty;\n\n  const { searchValue } = React.useContext(AppContext);\n  const [items, setItems] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  // const [currentPage, setCurrentPage] = useState(1);\n\n  const onChangeCategory = (id) => {\n    dispatch(setCategoryId(id));\n  };\n\n  const onChangePage = (number) => {\n    dispatch(setCurrentPage(number));\n  };\n\n  useEffect(() => {\n    setIsLoading(true);\n\n    const sortBy = sort.sortProperty.replace(\"-\", \"\");\n    const order = sort.sortProperty.includes(\"-\") ? \"asc\" : \"desc\";\n    const category = categoryId > 0 ? `category=${categoryId}` : \"\";\n    const search = searchValue ? `&search=${searchValue}` : \"\";\n\n    axios\n      .get(\n        `https://63f9be5e473885d837d21495.mockapi.io/items?page=${currentPage}&limit=4&${category}&sortBy=${sortBy}&oreder=${order}&${search}`\n      )\n      .then((res) => {\n        setItems(res.data);\n        setIsLoading(false);\n      });\n\n    window.scrollTo(0, 0);\n  }, [categoryId, sortType, searchValue, currentPage]);\n\n  React.useEffect(() => {\n    const queryString = qs.stringify({\n      sortProperty: sortProperty,\n      categoryId,\n      currentPage,\n    });\n  }, [categoryId, sortType, currentPage]);\n\n  const pizzas = items.map((obj) => (\n    <PizzaBlock\n      key={obj.id}\n      title={obj.title}\n      price={obj.price}\n      imageUrl={obj.imageUrl}\n      sizes={obj.sizes}\n      types={obj.types}\n    />\n  ));\n\n  const skeletons = [...new Array(6)].map((_, index) => (\n    <Skeleton key={index} />\n  ));\n\n  return (\n    <div className=\"container\">\n      <div className=\"content__top\">\n        <Categories value={categoryId} onClickCategory={onChangeCategory} />\n        <Sort />\n      </div>\n      <h2 className=\"content__title\">Все пиццы</h2>\n      <div className=\"content__items\">{isLoading ? skeletons : pizzas}</div>\n      <Pagination currentPage={currentPage} onChangePage={onChangePage} />\n    </div>\n  );\n};\n\nexport default Home;\n\n// window.scrollTo(0, 0); при переходе на старницу, страница отоброжается на вверху\n\n// const [categoryId, setCategoryId] = useState(0);\n//   const [sortType, setSortType] = useState({\n//     name: \"популярности\",\n//     sort: \"rating\",\n//   }); вынесли useState из Категорий и Сорта\n\n// fetch(\n//   `https://63f9be5e473885d837d21495.mockapi.io/items?page=${currentPage}&limit=4&${category}&sortBy=${sortBy}&oreder=${order}${search}`\n// )\n//   .then((res) => res.json())\n//   .then((arr) => {\n//     setItems(arr);\n//     setIsLoading(false);\n//   });\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,EAAE,MAAM,IAAI;AACnB,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AAEtD,SAASC,aAAa,EAAEC,cAAc,QAAQ,6BAA6B;AAC3E,OAAOC,UAAU,MAAM,yBAAyB;AAChD,OAAOC,IAAI,MAAM,mBAAmB;AACpC,OAAOC,UAAU,MAAM,oCAAoC;AAC3D,OAAOC,QAAQ,MAAM,kCAAkC;AACvD,OAAOC,UAAU,MAAM,yBAAyB;AAChD,SAASC,UAAU,QAAQ,QAAQ;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpC,MAAMC,IAAI,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACjB,MAAMC,QAAQ,GAAGb,WAAW,EAAE;EAC9B,MAAM;IAAEc,UAAU;IAAEC,IAAI;IAAEC;EAAY,CAAC,GAAGjB,WAAW,CAClDkB,KAAK,IAAKA,KAAK,CAACC,WAAW,CAC7B;EACD,MAAMC,QAAQ,GAAGJ,IAAI,CAACK,YAAY;EAElC,MAAM;IAAEC;EAAY,CAAC,GAAG3B,KAAK,CAAC4B,UAAU,CAACd,UAAU,CAAC;EACpD,MAAM,CAACe,KAAK,EAAEC,QAAQ,CAAC,GAAG7B,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAAC8B,SAAS,EAAEC,YAAY,CAAC,GAAG/B,QAAQ,CAAC,IAAI,CAAC;EAChD;;EAEA,MAAMgC,gBAAgB,GAAIC,EAAE,IAAK;IAC/Bf,QAAQ,CAACZ,aAAa,CAAC2B,EAAE,CAAC,CAAC;EAC7B,CAAC;EAED,MAAMC,YAAY,GAAIC,MAAM,IAAK;IAC/BjB,QAAQ,CAACX,cAAc,CAAC4B,MAAM,CAAC,CAAC;EAClC,CAAC;EAEDlC,SAAS,CAAC,MAAM;IACd8B,YAAY,CAAC,IAAI,CAAC;IAElB,MAAMK,MAAM,GAAGhB,IAAI,CAACK,YAAY,CAACY,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC;IACjD,MAAMC,KAAK,GAAGlB,IAAI,CAACK,YAAY,CAACc,QAAQ,CAAC,GAAG,CAAC,GAAG,KAAK,GAAG,MAAM;IAC9D,MAAMC,QAAQ,GAAGrB,UAAU,GAAG,CAAC,GAAI,YAAWA,UAAW,EAAC,GAAG,EAAE;IAC/D,MAAMsB,MAAM,GAAGf,WAAW,GAAI,WAAUA,WAAY,EAAC,GAAG,EAAE;IAE1DxB,KAAK,CACFwC,GAAG,CACD,0DAAyDrB,WAAY,YAAWmB,QAAS,WAAUJ,MAAO,WAAUE,KAAM,IAAGG,MAAO,EAAC,CACvI,CACAE,IAAI,CAAEC,GAAG,IAAK;MACbf,QAAQ,CAACe,GAAG,CAACC,IAAI,CAAC;MAClBd,YAAY,CAAC,KAAK,CAAC;IACrB,CAAC,CAAC;IAEJe,MAAM,CAACC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;EACvB,CAAC,EAAE,CAAC5B,UAAU,EAAEK,QAAQ,EAAEE,WAAW,EAAEL,WAAW,CAAC,CAAC;EAEpDtB,KAAK,CAACE,SAAS,CAAC,MAAM;IACpB,MAAM+C,WAAW,GAAG7C,EAAE,CAAC8C,SAAS,CAAC;MAC/BxB,YAAY,EAAEA,YAAY;MAC1BN,UAAU;MACVE;IACF,CAAC,CAAC;EACJ,CAAC,EAAE,CAACF,UAAU,EAAEK,QAAQ,EAAEH,WAAW,CAAC,CAAC;EAEvC,MAAM6B,MAAM,GAAGtB,KAAK,CAACuB,GAAG,CAAEC,GAAG,iBAC3BrC,OAAA,CAACL,UAAU;IAET2C,KAAK,EAAED,GAAG,CAACC,KAAM;IACjBC,KAAK,EAAEF,GAAG,CAACE,KAAM;IACjBC,QAAQ,EAAEH,GAAG,CAACG,QAAS;IACvBC,KAAK,EAAEJ,GAAG,CAACI,KAAM;IACjBC,KAAK,EAAEL,GAAG,CAACK;EAAM,GALZL,GAAG,CAACnB,EAAE;IAAAyB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QAOd,CAAC;EAEF,MAAMC,SAAS,GAAG,CAAC,GAAG,IAAIC,KAAK,CAAC,CAAC,CAAC,CAAC,CAACZ,GAAG,CAAC,CAACa,CAAC,EAAEC,KAAK,kBAC/ClD,OAAA,CAACJ,QAAQ,MAAMsD,KAAK;IAAAP,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACrB,CAAC;EAEF,oBACE9C,OAAA;IAAKmD,SAAS,EAAC,WAAW;IAAAC,QAAA,gBACxBpD,OAAA;MAAKmD,SAAS,EAAC,cAAc;MAAAC,QAAA,gBAC3BpD,OAAA,CAACP,UAAU;QAAC4D,KAAK,EAAEjD,UAAW;QAACkD,eAAe,EAAErC;MAAiB;QAAA0B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAG,eACpE9C,OAAA,CAACN,IAAI;QAAAiD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAG;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACJ,eACN9C,OAAA;MAAImD,SAAS,EAAC,gBAAgB;MAAAC,QAAA,EAAC;IAAS;MAAAT,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAK,eAC7C9C,OAAA;MAAKmD,SAAS,EAAC,gBAAgB;MAAAC,QAAA,EAAErC,SAAS,GAAGgC,SAAS,GAAGZ;IAAM;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAO,eACtE9C,OAAA,CAACH,UAAU;MAACS,WAAW,EAAEA,WAAY;MAACa,YAAY,EAAEA;IAAa;MAAAwB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAG;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QAChE;AAEV,CAAC;AAAC5C,EAAA,CA1EID,IAAI;EAAA,QACSX,WAAW,EACcD,WAAW;AAAA;AAAAkE,EAAA,GAFjDtD,IAAI;AA4EV,eAAeA,IAAI;;AAEnB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA,IAAAsD,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}