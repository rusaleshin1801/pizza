{"ast":null,"code":"import _slicedToArray from\"/Users/a366/pizza/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useDispatch}from\"react-redux\";import{setSort}from\"../redux/slices/filterSlice.ts\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var List=[{name:\"популярности\",sortProperty:\"rating\"},{name:\"цене\",sortProperty:\"price\"},{name:\"алфавиту\",sortProperty:\"title\"}];var Sort=function Sort(_ref){var value=_ref.value;var dispatch=useDispatch();var sortRef=React.useRef(null);var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),Open=_React$useState2[0],setIsOpen=_React$useState2[1];var onClickListItem=function onClickListItem(obj){dispatch(setSort(obj));setIsOpen(false);};React.useEffect(function(){var handleClickOutside=function handleClickOutside(Event){var _event=Event;if(sortRef.current&&!_event.path.includes(sortRef.current)){setIsOpen(false);}};document.body.addEventListener(\"click\",handleClickOutside);return function(){document.body.removeEventListener(\"click\",handleClickOutside);};},[]);return/*#__PURE__*/_jsxs(\"div\",{ref:sortRef,className:\"sort\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sort__label\",children:[/*#__PURE__*/_jsx(\"svg\",{width:\"10\",height:\"6\",viewBox:\"0 0 10 6\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z\",fill:\"#2C2C2C\"})}),/*#__PURE__*/_jsx(\"b\",{children:\"\\u0421\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430 \\u043F\\u043E:\"}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setIsOpen(!Open);},children:value.name})]}),Open&&/*#__PURE__*/_jsx(\"div\",{className:\"sort__popup\",children:/*#__PURE__*/_jsx(\"ul\",{children:List.map(function(obj,index){return/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return onClickListItem(obj);},className:value.sortProperty===obj.sortProperty?\"active\":\"\",children:obj.name},index);})})})]});};export default Sort;// setSelected(i); выбираем пункт\n// setIsOpen(false); скрываются поля, после выбора какого-то пункта\n// const sortName = List[Sorting]; сделали для того, чтобы при нажатии на выбор Сортиторвки, оставалось то значение, на которое мы кликнули","map":{"version":3,"names":["React","useDispatch","setSort","jsx","_jsx","jsxs","_jsxs","List","name","sortProperty","Sort","_ref","value","dispatch","sortRef","useRef","_React$useState","useState","_React$useState2","_slicedToArray","Open","setIsOpen","onClickListItem","obj","useEffect","handleClickOutside","Event","_event","current","path","includes","document","body","addEventListener","removeEventListener","ref","className","children","width","height","viewBox","fill","xmlns","d","onClick","map","index"],"sources":["/Users/a366/pizza/src/componets/Sort.tsx"],"sourcesContent":["import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Sort as SortType } from \"../redux/slices/filterSlice\";\n\nimport { setSort } from \"../redux/slices/filterSlice.ts\";\n\ntype ListItem = {\n  name: string;\n  sortProperty: \"rating\" | \"price\" | \"title\";\n};\n\ntype PopupClick = MouseEvent & {\n  path: Node[];\n};\n\ntype SortProps = {\n  value: SortType;\n};\n\nexport const List: ListItem[] = [\n  { name: \"популярности\", sortProperty: \"rating\" },\n  { name: \"цене\", sortProperty: \"price\" },\n  { name: \"алфавиту\", sortProperty: \"title\" },\n];\n\nconst Sort: React.FC<SortProps> = ({ value }) => {\n  const dispatch = useDispatch();\n\n  const sortRef = React.useRef<HTMLDivElement>(null);\n\n  const [Open, setIsOpen] = React.useState(false);\n\n  const onClickListItem = (obj: ListItem) => {\n    dispatch(setSort(obj));\n    setIsOpen(false);\n  };\n\n  React.useEffect(() => {\n    const handleClickOutside = (Event: MouseEvent) => {\n      const _event = Event as PopupClick;\n      if (sortRef.current && !_event.path.includes(sortRef.current)) {\n        setIsOpen(false);\n      }\n    };\n\n    document.body.addEventListener(\"click\", handleClickOutside);\n\n    return () => {\n      document.body.removeEventListener(\"click\", handleClickOutside);\n    };\n  }, []);\n\n  return (\n    <div ref={sortRef} className=\"sort\">\n      <div className=\"sort__label\">\n        <svg\n          width=\"10\"\n          height=\"6\"\n          viewBox=\"0 0 10 6\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            d=\"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z\"\n            fill=\"#2C2C2C\"\n          />\n        </svg>\n        <b>Сортировка по:</b>\n        <span onClick={() => setIsOpen(!Open)}>{value.name}</span>\n      </div>\n      {Open && (\n        <div className=\"sort__popup\">\n          <ul>\n            {List.map((obj, index) => (\n              <li\n                key={index}\n                onClick={() => onClickListItem(obj)}\n                className={\n                  value.sortProperty === obj.sortProperty ? \"active\" : \"\"\n                }\n              >\n                {obj.name}\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Sort;\n\n// setSelected(i); выбираем пункт\n// setIsOpen(false); скрываются поля, после выбора какого-то пункта\n// const sortName = List[Sorting]; сделали для того, чтобы при нажатии на выбор Сортиторвки, оставалось то значение, на которое мы кликнули\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}